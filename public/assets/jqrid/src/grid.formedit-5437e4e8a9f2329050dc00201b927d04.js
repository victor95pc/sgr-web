!function(t){"use strict";var e={};t.jgrid.extend({searchGrid:function(e){return e=t.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},t.jgrid.search,e||{}),this.each(function(){function i(i){d=t(a).triggerHandler("jqGridFilterBeforeShow",[i]),void 0===d&&(d=!0),d&&t.isFunction(e.beforeShowSearch)&&(d=e.beforeShowSearch.call(a,i)),d&&(t.jgrid.viewModal("#"+t.jgrid.jqID(o.themodal),{gbox:"#gbox_"+t.jgrid.jqID(r),jqm:e.jqModal,modal:e.modal,overlay:e.overlay,toTop:e.toTop}),t(a).triggerHandler("jqGridFilterAfterShow",[i]),t.isFunction(e.afterShowSearch)&&e.afterShowSearch.call(a,i))}var a=this;if(a.grid){var r="fbox_"+a.p.id,d=!0,o={themodal:"searchmod"+r,modalhead:"searchhd"+r,modalcontent:"searchcnt"+r,scrollelm:r},l=a.p.postData[e.sFilter];if("string"==typeof l&&(l=t.jgrid.parse(l)),e.recreateFilter===!0&&t("#"+t.jgrid.jqID(o.themodal)).remove(),void 0!==t("#"+t.jgrid.jqID(o.themodal))[0])i(t("#fbox_"+t.jgrid.jqID(+a.p.id)));else{var n=t("<div><div id='"+r+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+t.jgrid.jqID(a.p.id)),s="left",c="";"rtl"===a.p.direction&&(s="right",c=" style='text-align:left'",n.attr("dir","rtl"));var p,u,h=t.extend([],a.p.colModel),g="<a href='javascript:void(0)' id='"+r+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+e.Find+"</a>",f="<a href='javascript:void(0)' id='"+r+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+e.Reset+"</a>",m="",j="",v=!1,b=-1;if(e.showQuery&&(m="<a href='javascript:void(0)' id='"+r+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),e.columns.length?(h=e.columns,b=0,p=h[0].index||h[0].name):t.each(h,function(t,e){if(e.label||(e.label=a.p.colNames[t]),!v){var i=void 0===e.search?!0:e.search,r=e.hidden===!0,d=e.searchoptions&&e.searchoptions.searchhidden===!0;(d&&i||i&&!r)&&(v=!0,p=e.index||e.name,b=t)}}),!l&&p||e.multipleSearch===!1){var D="eq";b>=0&&h[b].searchoptions&&h[b].searchoptions.sopt?D=h[b].searchoptions.sopt[0]:e.sopt&&e.sopt.length&&(D=e.sopt[0]),l={groupOp:"AND",rules:[{field:p,op:D,data:""}]}}v=!1,e.tmplNames&&e.tmplNames.length&&(v=!0,j=e.tmplLabel,j+="<select class='ui-template'>",j+="<option value='default'>Default</option>",t.each(e.tmplNames,function(t,e){j+="<option value='"+t+"'>"+e+"</option>"}),j+="</select>"),u="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+r+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+s+"'>"+f+j+"</td><td class='EditButton' "+c+">"+m+g+"</td></tr></tbody></table>",r=t.jgrid.jqID(r),t("#"+r).jqFilter({columns:h,filter:e.loadDefaults?l:null,showQuery:e.showQuery,errorcheck:e.errorcheck,sopt:e.sopt,groupButton:e.multipleGroup,ruleButtons:e.multipleSearch,afterRedraw:e.afterRedraw,ops:e.odata,operands:e.operands,ajaxSelectOptions:a.p.ajaxSelectOptions,groupOps:e.groupOps,onChange:function(){this.p.showQuery&&t(".query",this).html(this.toUserFriendlyString()),t.isFunction(e.afterChange)&&e.afterChange.call(a,t("#"+r),e)},direction:a.p.direction,id:a.p.id}),n.append(u),v&&e.tmplFilters&&e.tmplFilters.length&&t(".ui-template",n).bind("change",function(){var i=t(this).val();return"default"===i?t("#"+r).jqFilter("addFilter",l):t("#"+r).jqFilter("addFilter",e.tmplFilters[parseInt(i,10)]),!1}),e.multipleGroup===!0&&(e.multipleSearch=!0),t(a).triggerHandler("jqGridFilterInitialize",[t("#"+r)]),t.isFunction(e.onInitializeSearch)&&e.onInitializeSearch.call(a,t("#"+r)),e.gbox="#gbox_"+r,e.layer?t.jgrid.createModal(o,n,e,"#gview_"+t.jgrid.jqID(a.p.id),t("#gbox_"+t.jgrid.jqID(a.p.id))[0],"#"+t.jgrid.jqID(e.layer),{position:"relative"}):t.jgrid.createModal(o,n,e,"#gview_"+t.jgrid.jqID(a.p.id),t("#gbox_"+t.jgrid.jqID(a.p.id))[0]),(e.searchOnEnter||e.closeOnEscape)&&t("#"+t.jgrid.jqID(o.themodal)).keydown(function(i){var a=t(i.target);return!e.searchOnEnter||13!==i.which||a.hasClass("add-group")||a.hasClass("add-rule")||a.hasClass("delete-group")||a.hasClass("delete-rule")||a.hasClass("fm-button")&&a.is("[id$=_query]")?e.closeOnEscape&&27===i.which?(t("#"+t.jgrid.jqID(o.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0:(t("#"+r+"_search").focus().click(),!1)}),m&&t("#"+r+"_query").bind("click",function(){return t(".queryresult",n).toggle(),!1}),void 0===e.stringResult&&(e.stringResult=e.multipleSearch),t("#"+r+"_search").bind("click",function(){var i,d=t("#"+r),l={},n=d.jqFilter("filterData");if(e.errorcheck&&(d[0].hideError(),e.showQuery||d.jqFilter("toSQLString"),d[0].p.error))return d[0].showError(),!1;if(e.stringResult){try{i=xmlJsonClass.toJson(n,"","",!1)}catch(s){try{i=JSON.stringify(n)}catch(c){}}"string"==typeof i&&(l[e.sFilter]=i,t.each([e.sField,e.sValue,e.sOper],function(){l[this]=""}))}else e.multipleSearch?(l[e.sFilter]=n,t.each([e.sField,e.sValue,e.sOper],function(){l[this]=""})):(l[e.sField]=n.rules[0].field,l[e.sValue]=n.rules[0].data,l[e.sOper]=n.rules[0].op,l[e.sFilter]="");return a.p.search=!0,t.extend(a.p.postData,l),t(a).triggerHandler("jqGridFilterSearch"),t.isFunction(e.onSearch)&&e.onSearch.call(a),t(a).trigger("reloadGrid",[{page:1}]),e.closeAfterSearch&&t.jgrid.hideModal("#"+t.jgrid.jqID(o.themodal),{gb:"#gbox_"+t.jgrid.jqID(a.p.id),jqm:e.jqModal,onClose:e.onClose}),!1}),t("#"+r+"_reset").bind("click",function(){var i={},d=t("#"+r);return a.p.search=!1,e.multipleSearch===!1?i[e.sField]=i[e.sValue]=i[e.sOper]="":i[e.sFilter]="",d[0].resetFilter(),v&&t(".ui-template",n).val("default"),t.extend(a.p.postData,i),t(a).triggerHandler("jqGridFilterReset"),t.isFunction(e.onReset)&&e.onReset.call(a),t(a).trigger("reloadGrid",[{page:1}]),!1}),i(t("#"+r)),t(".fm-button:not(.ui-state-disabled)",n).hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")})}}})},editGridRow:function(i,a){return a=t.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},t.jgrid.edit,a||{}),e[t(this)[0].p.id]=a,this.each(function(){function r(){return t(q+" > tbody > tr > td > .FormElement").each(function(){var e=t(".customelement",this);if(e.length){var i=e[0],a=t(i).attr("name");t.each(g.p.colModel,function(){if(this.name===a&&this.editoptions&&t.isFunction(this.editoptions.custom_value)){try{if(f[a]=this.editoptions.custom_value.call(g,t("#"+t.jgrid.jqID(a),q),"get"),void 0===f[a])throw"e1"}catch(e){"e1"===e?t.jgrid.info_dialog(t.jgrid.errors.errcap,"function 'custom_value' "+t.jgrid.edit.msg.novalue,t.jgrid.edit.bClose):t.jgrid.info_dialog(t.jgrid.errors.errcap,e.message,t.jgrid.edit.bClose)}return!0}})}else{switch(t(this).get(0).type){case"checkbox":if(t(this).is(":checked"))f[this.name]=t(this).val();else{var r=t(this).attr("offval");f[this.name]=r}break;case"select-one":f[this.name]=t("option:selected",this).val();break;case"select-multiple":f[this.name]=t(this).val(),f[this.name]=f[this.name]?f[this.name].join(","):"";var d=[];t("option:selected",this).each(function(e,i){d[e]=t(i).text()});break;case"password":case"text":case"textarea":case"button":f[this.name]=t(this).val()}g.p.autoencode&&(f[this.name]=t.jgrid.htmlEncode(f[this.name]))}}),!0}function d(i,a,r,d){var o,l,n,s,c,p,u,h=0,f=[],m=!1,j="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",v="";for(u=1;d>=u;u++)v+=j;if("_empty"!==i&&(m=t(a).jqGrid("getInd",i)),t(a.p.colModel).each(function(u){if(o=this.name,l=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,c=l?"style='display:none'":"","cb"!==o&&"subgrid"!==o&&this.editable===!0&&"rn"!==o){if(m===!1)s="";else if(o===a.p.ExpandColumn&&a.p.treeGrid===!0)s=t("td[role='gridcell']:eq("+u+")",a.rows[m]).text();else{try{s=t.unformat.call(a,t("td[role='gridcell']:eq("+u+")",a.rows[m]),{rowId:i,colModel:this},u)}catch(j){s=this.edittype&&"textarea"===this.edittype?t("td[role='gridcell']:eq("+u+")",a.rows[m]).text():t("td[role='gridcell']:eq("+u+")",a.rows[m]).html()}(!s||"&nbsp;"===s||"&#160;"===s||1===s.length&&160===s.charCodeAt(0))&&(s="")}var D=t.extend({},this.editoptions||{},{id:o,name:o}),q=t.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),w=parseInt(q.rowpos,10)||h+1,x=parseInt(2*(parseInt(q.colpos,10)||1),10);if("_empty"===i&&D.defaultValue&&(s=t.isFunction(D.defaultValue)?D.defaultValue.call(g):D.defaultValue),this.edittype||(this.edittype="text"),g.p.autoencode&&(s=t.jgrid.htmlDecode(s)),p=t.jgrid.createEl.call(g,this.edittype,D,s,!1,t.extend({},t.jgrid.ajaxOptions,a.p.ajaxSelectOptions||{})),(e[g.p.id].checkOnSubmit||e[g.p.id].checkOnUpdate)&&(e[g.p.id]._savedData[o]=s),t(p).addClass("FormElement"),t.inArray(this.edittype,["text","textarea","password","select"])>-1&&t(p).addClass("ui-widget-content ui-corner-all"),n=t(r).find("tr[rowpos="+w+"]"),q.rowabove){var y=t("<tr><td class='contentinfo' colspan='"+2*d+"'>"+q.rowcontent+"</td></tr>");t(r).append(y),y[0].rp=w}0===n.length&&(n=t("<tr "+c+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+o),t(n).append(v),t(r).append(n),n[0].rp=w),t("td:eq("+(x-2)+")",n[0]).html(void 0===q.label?a.p.colNames[u]:q.label),t("td:eq("+(x-1)+")",n[0]).append(q.elmprefix).append(p).append(q.elmsuffix),t.isFunction(D.custom_value)&&"_empty"!==i&&D.custom_value.call(g,t("#"+o,"#"+b),"set",s),t.jgrid.bindEv.call(g,p,D),f[h]=u,h++}}),h>0){var D=t("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+a.p.id+"_id' value='"+i+"'/></td></tr>");D[0].rp=h+999,t(r).append(D),(e[g.p.id].checkOnSubmit||e[g.p.id].checkOnUpdate)&&(e[g.p.id]._savedData[a.p.id+"_id"]=i)}return f}function o(i,a,r){var d,o,l,n,s,c,p=0;(e[g.p.id].checkOnSubmit||e[g.p.id].checkOnUpdate)&&(e[g.p.id]._savedData={},e[g.p.id]._savedData[a.p.id+"_id"]=i);var u=a.p.colModel;if("_empty"===i)return t(u).each(function(){d=this.name,n=t.extend({},this.editoptions||{}),l=t("#"+t.jgrid.jqID(d),"#"+r),l&&l.length&&null!==l[0]&&(s="",n.defaultValue?(s=t.isFunction(n.defaultValue)?n.defaultValue.call(g):n.defaultValue,"checkbox"===l[0].type?(c=s.toLowerCase(),c.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==c?(l[0].checked=!0,l[0].defaultChecked=!0,l[0].value=s):(l[0].checked=!1,l[0].defaultChecked=!1)):l.val(s)):"checkbox"===l[0].type?(l[0].checked=!1,l[0].defaultChecked=!1,s=t(l).attr("offval")):l[0].type&&"select"===l[0].type.substr(0,6)?l[0].selectedIndex=0:l.val(s),(e[g.p.id].checkOnSubmit===!0||e[g.p.id].checkOnUpdate)&&(e[g.p.id]._savedData[d]=s))}),t("#id_g","#"+r).val(i),void 0;var h=t(a).jqGrid("getInd",i,!0);h&&(t('td[role="gridcell"]',h).each(function(l){if(d=u[l].name,"cb"!==d&&"subgrid"!==d&&"rn"!==d&&u[l].editable===!0){if(d===a.p.ExpandColumn&&a.p.treeGrid===!0)o=t(this).text();else try{o=t.unformat.call(a,t(this),{rowId:i,colModel:u[l]},l)}catch(n){o="textarea"===u[l].edittype?t(this).text():t(this).html()}switch(g.p.autoencode&&(o=t.jgrid.htmlDecode(o)),(e[g.p.id].checkOnSubmit===!0||e[g.p.id].checkOnUpdate)&&(e[g.p.id]._savedData[d]=o),d=t.jgrid.jqID(d),u[l].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),t("#"+d,"#"+r).val(o);break;case"select":var s=o.split(",");s=t.map(s,function(e){return t.trim(e)}),t("#"+d+" option","#"+r).each(function(){this.selected=u[l].editoptions.multiple||t.trim(o)!==t.trim(t(this).text())&&s[0]!==t.trim(t(this).text())&&s[0]!==t.trim(t(this).val())?u[l].editoptions.multiple?t.inArray(t.trim(t(this).text()),s)>-1||t.inArray(t.trim(t(this).val()),s)>-1?!0:!1:!1:!0});break;case"checkbox":if(o=String(o),u[l].editoptions&&u[l].editoptions.value){var c=u[l].editoptions.value.split(":");c[0]===o?t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}else o=o.toLowerCase(),o.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]("checked",!0),t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]("defaultChecked",!0)):(t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]("checked",!1),t("#"+d,"#"+r)[g.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!u[l].editoptions||!t.isFunction(u[l].editoptions.custom_value))throw"e1";u[l].editoptions.custom_value.call(g,t("#"+d,"#"+r),"set",o)}catch(h){"e1"===h?t.jgrid.info_dialog(t.jgrid.errors.errcap,"function 'custom_value' "+t.jgrid.edit.msg.nodefined,t.jgrid.edit.bClose):t.jgrid.info_dialog(t.jgrid.errors.errcap,h.message,t.jgrid.edit.bClose)}}p++}}),p>0&&t("#id_g",q).val(i))}function l(){t.each(g.p.colModel,function(t,e){e.editoptions&&e.editoptions.NullIfEmpty===!0&&f.hasOwnProperty(e.name)&&""===f[e.name]&&(f[e.name]="null")})}function n(){var i,r,d,n,s,c,p=[!0,"",""],u={},h=g.p.prmNames,m=t(g).triggerHandler("jqGridAddEditBeforeCheckValues",[t("#"+b),j]);m&&"object"==typeof m&&(f=m),t.isFunction(e[g.p.id].beforeCheckValues)&&(m=e[g.p.id].beforeCheckValues.call(g,f,t("#"+b),j),m&&"object"==typeof m&&(f=m));for(n in f)if(f.hasOwnProperty(n)&&(p=t.jgrid.checkValues.call(g,f[n],n),p[0]===!1))break;if(l(),p[0]&&(u=t(g).triggerHandler("jqGridAddEditClickSubmit",[e[g.p.id],f,j]),void 0===u&&t.isFunction(e[g.p.id].onclickSubmit)&&(u=e[g.p.id].onclickSubmit.call(g,e[g.p.id],f,j)||{}),p=t(g).triggerHandler("jqGridAddEditBeforeSubmit",[f,t("#"+b),j]),void 0===p&&(p=[!0,"",""]),p[0]&&t.isFunction(e[g.p.id].beforeSubmit)&&(p=e[g.p.id].beforeSubmit.call(g,f,t("#"+b),j))),p[0]&&!e[g.p.id].processing){if(e[g.p.id].processing=!0,t("#sData",q+"_2").addClass("ui-state-active"),d=h.oper,r=h.id,f[d]="_empty"===t.trim(f[g.p.id+"_id"])?h.addoper:h.editoper,f[d]!==h.addoper?f[r]=f[g.p.id+"_id"]:void 0===f[r]&&(f[r]=f[g.p.id+"_id"]),delete f[g.p.id+"_id"],f=t.extend(f,e[g.p.id].editData,u),g.p.treeGrid===!0){if(f[d]===h.addoper){s=t(g).jqGrid("getGridParam","selrow");var D="adjacency"===g.p.treeGridModel?g.p.treeReader.parent_id_field:"parent_id";f[D]=s}for(c in g.p.treeReader)if(g.p.treeReader.hasOwnProperty(c)){var x=g.p.treeReader[c];if(f.hasOwnProperty(x)){if(f[d]===h.addoper&&"parent_id_field"===c)continue;delete f[x]}}}f[r]=t.jgrid.stripPref(g.p.idPrefix,f[r]);var y=t.extend({url:e[g.p.id].url||t(g).jqGrid("getGridParam","editurl"),type:e[g.p.id].mtype,data:t.isFunction(e[g.p.id].serializeEditData)?e[g.p.id].serializeEditData.call(g,f):f,complete:function(l,n){var c;if(f[r]=g.p.idPrefix+f[r],l.status>=300&&304!==l.status?(p[0]=!1,p[1]=t(g).triggerHandler("jqGridAddEditErrorTextFormat",[l,j]),p[1]=t.isFunction(e[g.p.id].errorTextFormat)?e[g.p.id].errorTextFormat.call(g,l,j):n+" Status: '"+l.statusText+"'. Error code: "+l.status):(p=t(g).triggerHandler("jqGridAddEditAfterSubmit",[l,f,j]),void 0===p&&(p=[!0,"",""]),p[0]&&t.isFunction(e[g.p.id].afterSubmit)&&(p=e[g.p.id].afterSubmit.call(g,l,f,j))),p[0]===!1)t("#FormError>td",q).html(p[1]),t("#FormError",q).show();else if(g.p.autoencode&&t.each(f,function(e,i){f[e]=t.jgrid.htmlDecode(i)}),f[d]===h.addoper?(p[2]||(p[2]=t.jgrid.randId()),f[r]=p[2],e[g.p.id].reloadAfterSubmit?t(g).trigger("reloadGrid"):g.p.treeGrid===!0?t(g).jqGrid("addChildNode",p[2],s,f):t(g).jqGrid("addRowData",p[2],f,a.addedrow),e[g.p.id].closeAfterAdd?(g.p.treeGrid!==!0&&t(g).jqGrid("setSelection",p[2]),t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose})):e[g.p.id].clearAfterAdd&&o("_empty",g,b)):(e[g.p.id].reloadAfterSubmit?(t(g).trigger("reloadGrid"),e[g.p.id].closeAfterEdit||setTimeout(function(){t(g).jqGrid("setSelection",f[r])},1e3)):g.p.treeGrid===!0?t(g).jqGrid("setTreeRow",f[r],f):t(g).jqGrid("setRowData",f[r],f),e[g.p.id].closeAfterEdit&&t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose})),t.isFunction(e[g.p.id].afterComplete)&&(i=l,setTimeout(function(){t(g).triggerHandler("jqGridAddEditAfterComplete",[i,f,t("#"+b),j]),e[g.p.id].afterComplete.call(g,i,f,t("#"+b),j),i=null},500)),(e[g.p.id].checkOnSubmit||e[g.p.id].checkOnUpdate)&&(t("#"+b).data("disabled",!1),"_empty"!==e[g.p.id]._savedData[g.p.id+"_id"]))for(c in e[g.p.id]._savedData)e[g.p.id]._savedData.hasOwnProperty(c)&&f[c]&&(e[g.p.id]._savedData[c]=f[c]);e[g.p.id].processing=!1,t("#sData",q+"_2").removeClass("ui-state-active");try{t(":input:visible","#"+b)[0].focus()}catch(u){}}},t.jgrid.ajaxOptions,e[g.p.id].ajaxEditOptions);if(y.url||e[g.p.id].useDataProxy||(t.isFunction(g.p.dataProxy)?e[g.p.id].useDataProxy=!0:(p[0]=!1,p[1]+=" "+t.jgrid.errors.nourl)),p[0])if(e[g.p.id].useDataProxy){var _=g.p.dataProxy.call(g,y,"set_"+g.p.id);void 0===_&&(_=[!0,""]),_[0]===!1?(p[0]=!1,p[1]=_[1]||"Error deleting the selected row!"):(y.data.oper===h.addoper&&e[g.p.id].closeAfterAdd&&t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),y.data.oper===h.editoper&&e[g.p.id].closeAfterEdit&&t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}))}else t.ajax(y)}p[0]===!1&&(t("#FormError>td",q).html(p[1]),t("#FormError",q).show())}function s(t,e){var i,a=!1;for(i in t)if(t.hasOwnProperty(i)&&t[i]!=e[i]){a=!0;break}return a}function c(){var i=!0;return t("#FormError",q).hide(),e[g.p.id].checkOnUpdate&&(f={},r(),m=s(f,e[g.p.id]._savedData),m&&(t("#"+b).data("disabled",!0),t(".confirm","#"+w.themodal).show(),i=!1)),i}function p(){var e;if("_empty"!==i&&void 0!==g.p.savedRow&&g.p.savedRow.length>0&&t.isFunction(t.fn.jqGrid.restoreRow))for(e=0;e<g.p.savedRow.length;e++)if(g.p.savedRow[e].id==i){t(g).jqGrid("restoreRow",i);break}}function u(e,i){var a=i[1].length-1;0===e?t("#pData",q+"_2").addClass("ui-state-disabled"):void 0!==i[1][e-1]&&t("#"+t.jgrid.jqID(i[1][e-1])).hasClass("ui-state-disabled")?t("#pData",q+"_2").addClass("ui-state-disabled"):t("#pData",q+"_2").removeClass("ui-state-disabled"),e===a?t("#nData",q+"_2").addClass("ui-state-disabled"):void 0!==i[1][e+1]&&t("#"+t.jgrid.jqID(i[1][e+1])).hasClass("ui-state-disabled")?t("#nData",q+"_2").addClass("ui-state-disabled"):t("#nData",q+"_2").removeClass("ui-state-disabled")}function h(){var e=t(g).jqGrid("getDataIDs"),i=t("#id_g",q).val(),a=t.inArray(i,e);return[a,e]}var g=this;if(g.grid&&i){var f,m,j,v=g.p.id,b="FrmGrid_"+v,D="TblGrid_"+v,q="#"+t.jgrid.jqID(D),w={themodal:"editmod"+v,modalhead:"edithd"+v,modalcontent:"editcnt"+v,scrollelm:b},x=t.isFunction(e[g.p.id].beforeShowForm)?e[g.p.id].beforeShowForm:!1,y=t.isFunction(e[g.p.id].afterShowForm)?e[g.p.id].afterShowForm:!1,_=t.isFunction(e[g.p.id].beforeInitData)?e[g.p.id].beforeInitData:!1,I=t.isFunction(e[g.p.id].onInitializeForm)?e[g.p.id].onInitializeForm:!1,C=!0,F=1,k=0;b=t.jgrid.jqID(b),"new"===i?(i="_empty",j="add",a.caption=e[g.p.id].addCaption):(a.caption=e[g.p.id].editCaption,j="edit"),a.recreateForm===!0&&void 0!==t("#"+t.jgrid.jqID(w.themodal))[0]&&t("#"+t.jgrid.jqID(w.themodal)).remove();var S=!0;if(a.checkOnUpdate&&a.jqModal&&!a.modal&&(S=!1),void 0!==t("#"+t.jgrid.jqID(w.themodal))[0]){if(C=t(g).triggerHandler("jqGridAddEditBeforeInitData",[t("#"+t.jgrid.jqID(b)),j]),void 0===C&&(C=!0),C&&_&&(C=_.call(g,t("#"+b),j)),C===!1)return;p(),t(".ui-jqdialog-title","#"+t.jgrid.jqID(w.modalhead)).html(a.caption),t("#FormError",q).hide(),e[g.p.id].topinfo?(t(".topinfo",q).html(e[g.p.id].topinfo),t(".tinfo",q).show()):t(".tinfo",q).hide(),e[g.p.id].bottominfo?(t(".bottominfo",q+"_2").html(e[g.p.id].bottominfo),t(".binfo",q+"_2").show()):t(".binfo",q+"_2").hide(),o(i,g,b),"_empty"!==i&&e[g.p.id].viewPagerButtons?t("#pData, #nData",q+"_2").show():t("#pData, #nData",q+"_2").hide(),e[g.p.id].processing===!0&&(e[g.p.id].processing=!1,t("#sData",q+"_2").removeClass("ui-state-active")),t("#"+b).data("disabled")===!0&&(t(".confirm","#"+t.jgrid.jqID(w.themodal)).hide(),t("#"+b).data("disabled",!1)),t(g).triggerHandler("jqGridAddEditBeforeShowForm",[t("#"+b),j]),x&&x.call(g,t("#"+b),j),t("#"+t.jgrid.jqID(w.themodal)).data("onClose",e[g.p.id].onClose),t.jgrid.viewModal("#"+t.jgrid.jqID(w.themodal),{gbox:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,jqM:!1,overlay:a.overlay,modal:a.modal,overlayClass:a.overlayClass}),S||t("."+t.jgrid.jqID(a.overlayClass)).click(function(){return c()?(t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1):!1}),t(g).triggerHandler("jqGridAddEditAfterShowForm",[t("#"+b),j]),y&&y.call(g,t("#"+b),j)}else{var E=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px",G=isNaN(a.datawidth)?a.datawidth:a.datawidth+"px",M=t("<form name='FormPost' id='"+b+"' class='FormGrid' onSubmit='return false;' style='width:"+G+";overflow:auto;position:relative;height:"+E+";'></form>").data("disabled",!1),O=t("<table id='"+D+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(C=t(g).triggerHandler("jqGridAddEditBeforeInitData",[t("#"+b),j]),void 0===C&&(C=!0),C&&_&&(C=_.call(g,t("#"+b,j))),C===!1)return;p(),t(g.p.colModel).each(function(){var t=this.formoptions;F=Math.max(F,t?t.colpos||0:0),k=Math.max(k,t?t.rowpos||0:0)}),t(M).append(O);var P=t("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*F+"'></td></tr>");P[0].rp=0,t(O).append(P),P=t("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*F+"'>"+e[g.p.id].topinfo+"</td></tr>"),P[0].rp=0,t(O).append(P);var A="rtl"===g.p.direction?!0:!1,T=A?"nData":"pData",B=A?"pData":"nData";d(i,g,O,F);var N="<a href='javascript:void(0)' id='"+T+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",R="<a href='javascript:void(0)' id='"+B+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",z="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>",H="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>",V="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+D+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(A?R+N:N+R)+"</td><td class='EditButton'>"+z+H+"</td></tr>";if(V+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+e[g.p.id].bottominfo+"</td></tr>",V+="</tbody></table>",k>0){var L=[];t.each(t(O)[0].rows,function(t,e){L[t]=e}),L.sort(function(t,e){return t.rp>e.rp?1:t.rp<e.rp?-1:0}),t.each(L,function(e,i){t("tbody",O).append(i)})}a.gbox="#gbox_"+t.jgrid.jqID(v);var U=!1;a.closeOnEscape===!0&&(a.closeOnEscape=!1,U=!0);var Q=t("<div></div>").append(M).append(V);if(t.jgrid.createModal(w,Q,a,"#gview_"+t.jgrid.jqID(g.p.id),t("#gbox_"+t.jgrid.jqID(g.p.id))[0]),A&&(t("#pData, #nData",q+"_2").css("float","right"),t(".EditButton",q+"_2").css("text-align","left")),e[g.p.id].topinfo&&t(".tinfo",q).show(),e[g.p.id].bottominfo&&t(".binfo",q+"_2").show(),Q=null,V=null,t("#"+t.jgrid.jqID(w.themodal)).keydown(function(i){var r=i.target;if(t("#"+b).data("disabled")===!0)return!1;if(e[g.p.id].savekey[0]===!0&&i.which===e[g.p.id].savekey[1]&&"TEXTAREA"!==r.tagName)return t("#sData",q+"_2").trigger("click"),!1;if(27===i.which)return c()?(U&&t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:a.gbox,jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1):!1;if(e[g.p.id].navkeys[0]===!0){if("_empty"===t("#id_g",q).val())return!0;if(i.which===e[g.p.id].navkeys[1])return t("#pData",q+"_2").trigger("click"),!1;if(i.which===e[g.p.id].navkeys[2])return t("#nData",q+"_2").trigger("click"),!1}}),a.checkOnUpdate&&(t("a.ui-jqdialog-titlebar-close span","#"+t.jgrid.jqID(w.themodal)).removeClass("jqmClose"),t("a.ui-jqdialog-titlebar-close","#"+t.jgrid.jqID(w.themodal)).unbind("click").click(function(){return c()?(t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1):!1})),a.saveicon=t.extend([!0,"left","ui-icon-disk"],a.saveicon),a.closeicon=t.extend([!0,"left","ui-icon-close"],a.closeicon),a.saveicon[0]===!0&&t("#sData",q+"_2").addClass("right"===a.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.saveicon[2]+"'></span>"),a.closeicon[0]===!0&&t("#cData",q+"_2").addClass("right"===a.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>"),e[g.p.id].checkOnSubmit||e[g.p.id].checkOnUpdate){z="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bYes+"</a>",R="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bNo+"</a>",H="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bExit+"</a>";var K=a.zIndex||999;K++,t("<div class='"+a.overlayClass+" jqgrid-overlay confirm' style='z-index:"+K+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(K+1)+"'>"+a.saveData+"<br/><br/>"+z+R+H+"</div>").insertAfter("#"+b),t("#sNew","#"+t.jgrid.jqID(w.themodal)).click(function(){return n(),t("#"+b).data("disabled",!1),t(".confirm","#"+t.jgrid.jqID(w.themodal)).hide(),!1}),t("#nNew","#"+t.jgrid.jqID(w.themodal)).click(function(){return t(".confirm","#"+t.jgrid.jqID(w.themodal)).hide(),t("#"+b).data("disabled",!1),setTimeout(function(){t(":input:visible","#"+b)[0].focus()},0),!1}),t("#cNew","#"+t.jgrid.jqID(w.themodal)).click(function(){return t(".confirm","#"+t.jgrid.jqID(w.themodal)).hide(),t("#"+b).data("disabled",!1),t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1})}t(g).triggerHandler("jqGridAddEditInitializeForm",[t("#"+b),j]),I&&I.call(g,t("#"+b),j),"_empty"!==i&&e[g.p.id].viewPagerButtons?t("#pData,#nData",q+"_2").show():t("#pData,#nData",q+"_2").hide(),t(g).triggerHandler("jqGridAddEditBeforeShowForm",[t("#"+b),j]),x&&x.call(g,t("#"+b),j),t("#"+t.jgrid.jqID(w.themodal)).data("onClose",e[g.p.id].onClose),t.jgrid.viewModal("#"+t.jgrid.jqID(w.themodal),{gbox:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,overlay:a.overlay,modal:a.modal,overlayClass:a.overlayClass}),S||t("."+t.jgrid.jqID(a.overlayClass)).click(function(){return c()?(t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1):!1}),t(g).triggerHandler("jqGridAddEditAfterShowForm",[t("#"+b),j]),y&&y.call(g,t("#"+b),j),t(".fm-button","#"+t.jgrid.jqID(w.themodal)).hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}),t("#sData",q+"_2").click(function(){return f={},t("#FormError",q).hide(),r(),"_empty"===f[g.p.id+"_id"]?n():a.checkOnSubmit===!0?(m=s(f,e[g.p.id]._savedData),m?(t("#"+b).data("disabled",!0),t(".confirm","#"+t.jgrid.jqID(w.themodal)).show()):n()):n(),!1}),t("#cData",q+"_2").click(function(){return c()?(t.jgrid.hideModal("#"+t.jgrid.jqID(w.themodal),{gb:"#gbox_"+t.jgrid.jqID(v),jqm:a.jqModal,onClose:e[g.p.id].onClose}),!1):!1}),t("#nData",q+"_2").click(function(){if(!c())return!1;t("#FormError",q).hide();var e=h();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){t(g).triggerHandler("jqGridAddEditClickPgButtons",["next",t("#"+b),e[1][e[0]]]);var i;if(t.isFunction(a.onclickPgButtons)&&(i=a.onclickPgButtons.call(g,"next",t("#"+b),e[1][e[0]]),void 0!==i&&i===!1))return!1;if(t("#"+t.jgrid.jqID(e[1][e[0]+1])).hasClass("ui-state-disabled"))return!1;o(e[1][e[0]+1],g,b),t(g).jqGrid("setSelection",e[1][e[0]+1]),t(g).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",t("#"+b),e[1][e[0]]]),t.isFunction(a.afterclickPgButtons)&&a.afterclickPgButtons.call(g,"next",t("#"+b),e[1][e[0]+1]),u(e[0]+1,e)}return!1}),t("#pData",q+"_2").click(function(){if(!c())return!1;t("#FormError",q).hide();var e=h();if(-1!==e[0]&&e[1][e[0]-1]){t(g).triggerHandler("jqGridAddEditClickPgButtons",["prev",t("#"+b),e[1][e[0]]]);var i;if(t.isFunction(a.onclickPgButtons)&&(i=a.onclickPgButtons.call(g,"prev",t("#"+b),e[1][e[0]]),void 0!==i&&i===!1))return!1;if(t("#"+t.jgrid.jqID(e[1][e[0]-1])).hasClass("ui-state-disabled"))return!1;o(e[1][e[0]-1],g,b),t(g).jqGrid("setSelection",e[1][e[0]-1]),t(g).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",t("#"+b),e[1][e[0]]]),t.isFunction(a.afterclickPgButtons)&&a.afterclickPgButtons.call(g,"prev",t("#"+b),e[1][e[0]-1]),u(e[0]-1,e)}return!1})}var W=h();u(W[0],W)}})},viewGridRow:function(i,a){return a=t.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},t.jgrid.view,a||{}),e[t(this)[0].p.id]=a,this.each(function(){function r(){(e[s.p.id].closeOnEscape===!0||e[s.p.id].navkeys[0]===!0)&&setTimeout(function(){t(".ui-jqdialog-titlebar-close","#"+t.jgrid.jqID(f.modalhead)).focus()},0)}function d(e,i,r,d){var o,l,n,s,c,p,u,h,g,f=0,m=[],j=!1,v="<td class='CaptionTD form-view-label ui-widget-content' width='"+a.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",b="",D="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",q=["integer","number","currency"],w=0,x=0;for(p=1;d>=p;p++)b+=1===p?v:D;if(t(i.p.colModel).each(function(){l=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,l||"right"!==this.align||(this.formatter&&-1!==t.inArray(this.formatter,q)?w=Math.max(w,parseInt(this.width,10)):x=Math.max(x,parseInt(this.width,10)))}),u=0!==w?w:0!==x?x:0,j=t(i).jqGrid("getInd",e),t(i.p.colModel).each(function(e){if(o=this.name,h=!1,l=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,c=l?"style='display:none'":"",g="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==o&&"subgrid"!==o&&"rn"!==o&&g){s=j===!1?"":o===i.p.ExpandColumn&&i.p.treeGrid===!0?t("td:eq("+e+")",i.rows[j]).text():t("td:eq("+e+")",i.rows[j]).html(),h="right"===this.align&&0!==u?!0:!1;var a=t.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),p=parseInt(a.rowpos,10)||f+1,v=parseInt(2*(parseInt(a.colpos,10)||1),10);if(a.rowabove){var D=t("<tr><td class='contentinfo' colspan='"+2*d+"'>"+a.rowcontent+"</td></tr>");t(r).append(D),D[0].rp=p}n=t(r).find("tr[rowpos="+p+"]"),0===n.length&&(n=t("<tr "+c+" rowpos='"+p+"'></tr>").addClass("FormData").attr("id","trv_"+o),t(n).append(b),t(r).append(n),n[0].rp=p),t("td:eq("+(v-2)+")",n[0]).html("<b>"+(void 0===a.label?i.p.colNames[e]:a.label)+"</b>"),t("td:eq("+(v-1)+")",n[0]).append("<span>"+s+"</span>").attr("id","v_"+o),h&&t("td:eq("+(v-1)+") span",n[0]).css({"text-align":"right",width:u+"px"}),m[f]=e,f++}}),f>0){var y=t("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*d-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");y[0].rp=f+99,t(r).append(y)
}return m}function o(e,i){var a,r,d,o,l=0;o=t(i).jqGrid("getInd",e,!0),o&&(t("td",o).each(function(e){a=i.p.colModel[e].name,r=i.p.colModel[e].editrules&&i.p.colModel[e].editrules.edithidden===!0?!1:i.p.colModel[e].hidden===!0?!0:!1,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&(d=a===i.p.ExpandColumn&&i.p.treeGrid===!0?t(this).text():t(this).html(),a=t.jgrid.jqID("v_"+a),t("#"+a+" span","#"+u).html(d),r&&t("#"+a,"#"+u).parents("tr:first").hide(),l++)}),l>0&&t("#id_g","#"+u).val(e))}function l(e,i){var a=i[1].length-1;0===e?t("#pData","#"+u+"_2").addClass("ui-state-disabled"):void 0!==i[1][e-1]&&t("#"+t.jgrid.jqID(i[1][e-1])).hasClass("ui-state-disabled")?t("#pData",u+"_2").addClass("ui-state-disabled"):t("#pData","#"+u+"_2").removeClass("ui-state-disabled"),e===a?t("#nData","#"+u+"_2").addClass("ui-state-disabled"):void 0!==i[1][e+1]&&t("#"+t.jgrid.jqID(i[1][e+1])).hasClass("ui-state-disabled")?t("#nData",u+"_2").addClass("ui-state-disabled"):t("#nData","#"+u+"_2").removeClass("ui-state-disabled")}function n(){var e=t(s).jqGrid("getDataIDs"),i=t("#id_g","#"+u).val(),a=t.inArray(i,e);return[a,e]}var s=this;if(s.grid&&i){var c=s.p.id,p="ViewGrid_"+t.jgrid.jqID(c),u="ViewTbl_"+t.jgrid.jqID(c),h="ViewGrid_"+c,g="ViewTbl_"+c,f={themodal:"viewmod"+c,modalhead:"viewhd"+c,modalcontent:"viewcnt"+c,scrollelm:p},m=t.isFunction(e[s.p.id].beforeInitData)?e[s.p.id].beforeInitData:!1,j=!0,v=1,b=0;if(a.recreateForm===!0&&void 0!==t("#"+t.jgrid.jqID(f.themodal))[0]&&t("#"+t.jgrid.jqID(f.themodal)).remove(),void 0!==t("#"+t.jgrid.jqID(f.themodal))[0]){if(m&&(j=m.call(s,t("#"+p)),void 0===j&&(j=!0)),j===!1)return;t(".ui-jqdialog-title","#"+t.jgrid.jqID(f.modalhead)).html(a.caption),t("#FormError","#"+u).hide(),o(i,s),t.isFunction(e[s.p.id].beforeShowForm)&&e[s.p.id].beforeShowForm.call(s,t("#"+p)),t.jgrid.viewModal("#"+t.jgrid.jqID(f.themodal),{gbox:"#gbox_"+t.jgrid.jqID(c),jqm:a.jqModal,jqM:!1,overlay:a.overlay,modal:a.modal}),r()}else{var D=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px",q=isNaN(a.datawidth)?a.datawidth:a.datawidth+"px",w=t("<form name='FormPost' id='"+h+"' class='FormGrid' style='width:"+q+";overflow:auto;position:relative;height:"+D+";'></form>"),x=t("<table id='"+g+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(m&&(j=m.call(s,t("#"+p)),void 0===j&&(j=!0)),j===!1)return;t(s.p.colModel).each(function(){var t=this.formoptions;v=Math.max(v,t?t.colpos||0:0),b=Math.max(b,t?t.rowpos||0:0)}),t(w).append(x),d(i,s,x,v);var y="rtl"===s.p.direction?!0:!1,_=y?"nData":"pData",I=y?"pData":"nData",C="<a href='javascript:void(0)' id='"+_+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",F="<a href='javascript:void(0)' id='"+I+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",k="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+a.bClose+"</a>";if(b>0){var S=[];t.each(t(x)[0].rows,function(t,e){S[t]=e}),S.sort(function(t,e){return t.rp>e.rp?1:t.rp<e.rp?-1:0}),t.each(S,function(e,i){t("tbody",x).append(i)})}a.gbox="#gbox_"+t.jgrid.jqID(c);var E=t("<div></div>").append(w).append("<table border='0' class='EditTable' id='"+u+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+a.labelswidth+"'>"+(y?F+C:C+F)+"</td><td class='EditButton'>"+k+"</td></tr></tbody></table>");t.jgrid.createModal(f,E,a,"#gview_"+t.jgrid.jqID(s.p.id),t("#gview_"+t.jgrid.jqID(s.p.id))[0]),y&&(t("#pData, #nData","#"+u+"_2").css("float","right"),t(".EditButton","#"+u+"_2").css("text-align","left")),a.viewPagerButtons||t("#pData, #nData","#"+u+"_2").hide(),E=null,t("#"+f.themodal).keydown(function(i){if(27===i.which)return e[s.p.id].closeOnEscape&&t.jgrid.hideModal("#"+t.jgrid.jqID(f.themodal),{gb:a.gbox,jqm:a.jqModal,onClose:a.onClose}),!1;if(a.navkeys[0]===!0){if(i.which===a.navkeys[1])return t("#pData","#"+u+"_2").trigger("click"),!1;if(i.which===a.navkeys[2])return t("#nData","#"+u+"_2").trigger("click"),!1}}),a.closeicon=t.extend([!0,"left","ui-icon-close"],a.closeicon),a.closeicon[0]===!0&&t("#cData","#"+u+"_2").addClass("right"===a.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>"),t.isFunction(a.beforeShowForm)&&a.beforeShowForm.call(s,t("#"+p)),t.jgrid.viewModal("#"+t.jgrid.jqID(f.themodal),{gbox:"#gbox_"+t.jgrid.jqID(c),jqm:a.jqModal,overlay:a.overlay,modal:a.modal}),t(".fm-button:not(.ui-state-disabled)","#"+u+"_2").hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}),r(),t("#cData","#"+u+"_2").click(function(){return t.jgrid.hideModal("#"+t.jgrid.jqID(f.themodal),{gb:"#gbox_"+t.jgrid.jqID(c),jqm:a.jqModal,onClose:a.onClose}),!1}),t("#nData","#"+u+"_2").click(function(){t("#FormError","#"+u).hide();var e=n();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(t.isFunction(a.onclickPgButtons)&&a.onclickPgButtons.call(s,"next",t("#"+p),e[1][e[0]]),o(e[1][e[0]+1],s),t(s).jqGrid("setSelection",e[1][e[0]+1]),t.isFunction(a.afterclickPgButtons)&&a.afterclickPgButtons.call(s,"next",t("#"+p),e[1][e[0]+1]),l(e[0]+1,e)),r(),!1}),t("#pData","#"+u+"_2").click(function(){t("#FormError","#"+u).hide();var e=n();return-1!==e[0]&&e[1][e[0]-1]&&(t.isFunction(a.onclickPgButtons)&&a.onclickPgButtons.call(s,"prev",t("#"+p),e[1][e[0]]),o(e[1][e[0]-1],s),t(s).jqGrid("setSelection",e[1][e[0]-1]),t.isFunction(a.afterclickPgButtons)&&a.afterclickPgButtons.call(s,"prev",t("#"+p),e[1][e[0]-1]),l(e[0]-1,e)),r(),!1})}var G=n();l(G[0],G)}})},delGridRow:function(i,a){return a=t.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},t.jgrid.del,a||{}),e[t(this)[0].p.id]=a,this.each(function(){var r=this;if(r.grid&&i){var d,o,l,n,s=t.isFunction(e[r.p.id].beforeShowForm),c=t.isFunction(e[r.p.id].afterShowForm),p=t.isFunction(e[r.p.id].beforeInitData)?e[r.p.id].beforeInitData:!1,u=r.p.id,h={},g=!0,f="DelTbl_"+t.jgrid.jqID(u),m="DelTbl_"+u,j={themodal:"delmod"+u,modalhead:"delhd"+u,modalcontent:"delcnt"+u,scrollelm:f};if(t.isArray(i)&&(i=i.join()),void 0!==t("#"+t.jgrid.jqID(j.themodal))[0]){if(p&&(g=p.call(r,t("#"+f)),void 0===g&&(g=!0)),g===!1)return;t("#DelData>td","#"+f).text(i),t("#DelError","#"+f).hide(),e[r.p.id].processing===!0&&(e[r.p.id].processing=!1,t("#dData","#"+f).removeClass("ui-state-active")),s&&e[r.p.id].beforeShowForm.call(r,t("#"+f)),t.jgrid.viewModal("#"+t.jgrid.jqID(j.themodal),{gbox:"#gbox_"+t.jgrid.jqID(u),jqm:e[r.p.id].jqModal,jqM:!1,overlay:e[r.p.id].overlay,modal:e[r.p.id].modal}),c&&e[r.p.id].afterShowForm.call(r,t("#"+f))}else{var v=isNaN(e[r.p.id].dataheight)?e[r.p.id].dataheight:e[r.p.id].dataheight+"px",b=isNaN(a.datawidth)?a.datawidth:a.datawidth+"px",D="<div id='"+m+"' class='formdata' style='width:"+b+";overflow:auto;position:relative;height:"+v+";'>";D+="<table class='DelTable'><tbody>",D+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",D+="<tr id='DelData' style='display:none'><td >"+i+"</td></tr>",D+='<tr><td class="delmsg" style="white-space:pre;">'+e[r.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",D+="</tbody></table></div>";var q="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>",w="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>";if(D+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+f+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+q+"&#160;"+w+"</td></tr></tbody></table>",a.gbox="#gbox_"+t.jgrid.jqID(u),t.jgrid.createModal(j,D,a,"#gview_"+t.jgrid.jqID(r.p.id),t("#gview_"+t.jgrid.jqID(r.p.id))[0]),p&&(g=p.call(r,t("#"+f)),void 0===g&&(g=!0)),g===!1)return;t(".fm-button","#"+f+"_2").hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}),a.delicon=t.extend([!0,"left","ui-icon-scissors"],e[r.p.id].delicon),a.cancelicon=t.extend([!0,"left","ui-icon-cancel"],e[r.p.id].cancelicon),a.delicon[0]===!0&&t("#dData","#"+f+"_2").addClass("right"===a.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.delicon[2]+"'></span>"),a.cancelicon[0]===!0&&t("#eData","#"+f+"_2").addClass("right"===a.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.cancelicon[2]+"'></span>"),t("#dData","#"+f+"_2").click(function(){var i,s=[!0,""],c=t("#DelData>td","#"+f).text();if(h={},t.isFunction(e[r.p.id].onclickSubmit)&&(h=e[r.p.id].onclickSubmit.call(r,e[r.p.id],c)||{}),t.isFunction(e[r.p.id].beforeSubmit)&&(s=e[r.p.id].beforeSubmit.call(r,c)),s[0]&&!e[r.p.id].processing){if(e[r.p.id].processing=!0,l=r.p.prmNames,d=t.extend({},e[r.p.id].delData,h),n=l.oper,d[n]=l.deloper,o=l.id,c=String(c).split(","),!c.length)return!1;for(i in c)c.hasOwnProperty(i)&&(c[i]=t.jgrid.stripPref(r.p.idPrefix,c[i]));d[o]=c.join(),t(this).addClass("ui-state-active");var p=t.extend({url:e[r.p.id].url||t(r).jqGrid("getGridParam","editurl"),type:e[r.p.id].mtype,data:t.isFunction(e[r.p.id].serializeDelData)?e[r.p.id].serializeDelData.call(r,d):d,complete:function(i,o){var l;if(i.status>=300&&304!==i.status?(s[0]=!1,s[1]=t.isFunction(e[r.p.id].errorTextFormat)?e[r.p.id].errorTextFormat.call(r,i):o+" Status: '"+i.statusText+"'. Error code: "+i.status):t.isFunction(e[r.p.id].afterSubmit)&&(s=e[r.p.id].afterSubmit.call(r,i,d)),s[0]===!1)t("#DelError>td","#"+f).html(s[1]),t("#DelError","#"+f).show();else{if(e[r.p.id].reloadAfterSubmit&&"local"!==r.p.datatype)t(r).trigger("reloadGrid");else{if(r.p.treeGrid===!0)try{t(r).jqGrid("delTreeNode",r.p.idPrefix+c[0])}catch(n){}else for(l=0;l<c.length;l++)t(r).jqGrid("delRowData",r.p.idPrefix+c[l]);r.p.selrow=null,r.p.selarrrow=[]}t.isFunction(e[r.p.id].afterComplete)&&setTimeout(function(){e[r.p.id].afterComplete.call(r,i,c)},500)}e[r.p.id].processing=!1,t("#dData","#"+f+"_2").removeClass("ui-state-active"),s[0]&&t.jgrid.hideModal("#"+t.jgrid.jqID(j.themodal),{gb:"#gbox_"+t.jgrid.jqID(u),jqm:a.jqModal,onClose:e[r.p.id].onClose})}},t.jgrid.ajaxOptions,e[r.p.id].ajaxDelOptions);if(p.url||e[r.p.id].useDataProxy||(t.isFunction(r.p.dataProxy)?e[r.p.id].useDataProxy=!0:(s[0]=!1,s[1]+=" "+t.jgrid.errors.nourl)),s[0])if(e[r.p.id].useDataProxy){var g=r.p.dataProxy.call(r,p,"del_"+r.p.id);void 0===g&&(g=[!0,""]),g[0]===!1?(s[0]=!1,s[1]=g[1]||"Error deleting the selected row!"):t.jgrid.hideModal("#"+t.jgrid.jqID(j.themodal),{gb:"#gbox_"+t.jgrid.jqID(u),jqm:a.jqModal,onClose:e[r.p.id].onClose})}else t.ajax(p)}return s[0]===!1&&(t("#DelError>td","#"+f).html(s[1]),t("#DelError","#"+f).show()),!1}),t("#eData","#"+f+"_2").click(function(){return t.jgrid.hideModal("#"+t.jgrid.jqID(j.themodal),{gb:"#gbox_"+t.jgrid.jqID(u),jqm:e[r.p.id].jqModal,onClose:e[r.p.id].onClose}),!1}),s&&e[r.p.id].beforeShowForm.call(r,t("#"+f)),t.jgrid.viewModal("#"+t.jgrid.jqID(j.themodal),{gbox:"#gbox_"+t.jgrid.jqID(u),jqm:e[r.p.id].jqModal,overlay:e[r.p.id].overlay,modal:e[r.p.id].modal}),c&&e[r.p.id].afterShowForm.call(r,t("#"+f))}e[r.p.id].closeOnEscape===!0&&setTimeout(function(){t(".ui-jqdialog-titlebar-close","#"+t.jgrid.jqID(j.modalhead)).focus()},0)}})},navGrid:function(e,i,a,r,d,o,l){return i=t.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},t.jgrid.nav,i||{}),this.each(function(){if(!this.nav){var n,s,c={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},p=this;if(p.grid&&"string"==typeof e){void 0===t("#"+c.themodal)[0]&&(i.alerttop||i.alertleft||(void 0!==window.innerWidth?(i.alertleft=window.innerWidth,i.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(i.alertleft=document.documentElement.clientWidth,i.alerttop=document.documentElement.clientHeight):(i.alertleft=1024,i.alerttop=768),i.alertleft=i.alertleft/2-parseInt(i.alertwidth,10)/2,i.alerttop=i.alerttop/2-25),t.jgrid.createModal(c,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+t.jgrid.jqID(p.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex},"#gview_"+t.jgrid.jqID(p.p.id),t("#gbox_"+t.jgrid.jqID(p.p.id))[0],!0));var u,h=1,g=function(){t(this).hasClass("ui-state-disabled")||t(this).addClass("ui-state-hover")},f=function(){t(this).removeClass("ui-state-hover")};for(i.cloneToTop&&p.p.toppager&&(h=2),u=0;h>u;u++){var m,j,v,b=t("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),D="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===u?(j=e,v=p.p.id,j===p.p.toppager&&(v+="_top",h=1)):(j=p.p.toppager,v=p.p.id+"_top"),"rtl"===p.p.direction&&t(b).attr("dir","rtl").css("float","right"),i.add&&(r=r||{},m=t("<td class='ui-pg-button ui-corner-all'></td>"),t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'></span>"+i.addtext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.addtitle||"",id:r.id||"add_"+v}).click(function(){return t(this).hasClass("ui-state-disabled")||(t.isFunction(i.addfunc)?i.addfunc.call(p):t(p).jqGrid("editGridRow","new",r)),!1}).hover(g,f),m=null),i.edit&&(m=t("<td class='ui-pg-button ui-corner-all'></td>"),a=a||{},t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'></span>"+i.edittext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.edittitle||"",id:a.id||"edit_"+v}).click(function(){if(!t(this).hasClass("ui-state-disabled")){var e=p.p.selrow;e?t.isFunction(i.editfunc)?i.editfunc.call(p,e):t(p).jqGrid("editGridRow",e,a):(t.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+t.jgrid.jqID(p.p.id),jqm:!0}),t("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),i.view&&(m=t("<td class='ui-pg-button ui-corner-all'></td>"),l=l||{},t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'></span>"+i.viewtext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.viewtitle||"",id:l.id||"view_"+v}).click(function(){if(!t(this).hasClass("ui-state-disabled")){var e=p.p.selrow;e?t.isFunction(i.viewfunc)?i.viewfunc.call(p,e):t(p).jqGrid("viewGridRow",e,l):(t.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+t.jgrid.jqID(p.p.id),jqm:!0}),t("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),i.del&&(m=t("<td class='ui-pg-button ui-corner-all'></td>"),d=d||{},t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'></span>"+i.deltext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.deltitle||"",id:d.id||"del_"+v}).click(function(){if(!t(this).hasClass("ui-state-disabled")){var e;p.p.multiselect?(e=p.p.selarrrow,0===e.length&&(e=null)):e=p.p.selrow,e?t.isFunction(i.delfunc)?i.delfunc.call(p,e):t(p).jqGrid("delGridRow",e,d):(t.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+t.jgrid.jqID(p.p.id),jqm:!0}),t("#jqg_alrt").focus())}return!1}).hover(g,f),m=null),(i.add||i.edit||i.del||i.view)&&t("tr",b).append(D),i.search&&(m=t("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'></span>"+i.searchtext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.searchtitle||"",id:o.id||"search_"+v}).click(function(){return t(this).hasClass("ui-state-disabled")||(t.isFunction(i.searchfunc)?i.searchfunc.call(p,o):t(p).jqGrid("searchGrid",o)),!1}).hover(g,f),o.showOnLoad&&o.showOnLoad===!0&&t(m,b).click(),m=null),i.refresh&&(m=t("<td class='ui-pg-button ui-corner-all'></td>"),t(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),t("tr",b).append(m),t(m,b).attr({title:i.refreshtitle||"",id:"refresh_"+v}).click(function(){if(!t(this).hasClass("ui-state-disabled")){t.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(p),p.p.search=!1;try{var e=p.p.id;p.p.postData.filters="";try{t("#fbox_"+t.jgrid.jqID(e)).jqFilter("resetFilter")}catch(a){}t.isFunction(p.clearToolbar)&&p.clearToolbar.call(p,!1)}catch(r){}switch(i.refreshstate){case"firstpage":t(p).trigger("reloadGrid",[{page:1}]);break;case"current":t(p).trigger("reloadGrid",[{current:!0}])}t.isFunction(i.afterRefresh)&&i.afterRefresh.call(p)}return!1}).hover(g,f),m=null),s=t(".ui-jqgrid").css("font-size")||"11px",t("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+s+";visibility:hidden;' ></div>"),n=t(b).clone().appendTo("#testpg2").width(),t("#testpg2").remove(),t(j+"_"+i.position,j).append(b),p.p._nvtd&&(n>p.p._nvtd[0]&&(t(j+"_"+i.position,j).width(n),p.p._nvtd[0]=n),p.p._nvtd[1]=n),s=null,n=null,b=null,this.nav=!0}}}})},navButtonAdd:function(e,i){return i=t.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){if(this.grid){"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+t.jgrid.jqID(e));var a=t(".navtable",e)[0],r=this;if(a){if(i.id&&void 0!==t("#"+t.jgrid.jqID(i.id),a)[0])return;var d=t("<td></td>");"NONE"===i.buttonicon.toString().toUpperCase()?t(d).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"</div>"):t(d).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&t(d).attr("id",i.id),"first"===i.position?0===a.rows[0].cells.length?t("tr",a).append(d):t("tr td:eq(0)",a).before(d):t("tr",a).append(d),t(d,a).attr("title",i.title||"").click(function(e){return t(this).hasClass("ui-state-disabled")||t.isFunction(i.onClickButton)&&i.onClickButton.call(r,e),!1}).hover(function(){t(this).hasClass("ui-state-disabled")||t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(e,i){return i=t.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){"string"==typeof e&&0!==e.indexOf("#")&&(e="#"+t.jgrid.jqID(e));var a=t(".navtable",e)[0];if(a){var r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>";"first"===i.position?0===a.rows[0].cells.length?t("tr",a).append(r):t("tr td:eq(0)",a).before(r):t("tr",a).append(r)}}})},GridToForm:function(e,i){return this.each(function(){var a,r=this;if(r.grid){var d=t(r).jqGrid("getRowData",e);if(d)for(a in d)d.hasOwnProperty(a)&&(t("[name="+t.jgrid.jqID(a)+"]",i).is("input:radio")||t("[name="+t.jgrid.jqID(a)+"]",i).is("input:checkbox")?t("[name="+t.jgrid.jqID(a)+"]",i).each(function(){t(this).val()==d[a]?t(this)[r.p.useProp?"prop":"attr"]("checked",!0):t(this)[r.p.useProp?"prop":"attr"]("checked",!1)}):t("[name="+t.jgrid.jqID(a)+"]",i).val(d[a]))}})},FormToGrid:function(e,i,a,r){return this.each(function(){var d=this;if(d.grid){a||(a="set"),r||(r="first");var o=t(i).serializeArray(),l={};t.each(o,function(t,e){l[e.name]=e.value}),"add"===a?t(d).jqGrid("addRowData",e,l,r):"set"===a&&t(d).jqGrid("setRowData",e,l)}})}})}(jQuery);