!function($){"use strict";if($.jgrid.msie&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(t){return 0===t.offsetWidth||0===t.offsetHeight||"none"===t.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(t,e){var i=setSelected.call(this,t,e);if(e&&this.selectedList){var o=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(o)})}return i}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(t){return this.each(function(){function e(){i.p.disableClick=!0}var i=this,o=$.jgrid.jqID(i.p.id),s={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+o+"_cb,#jqgh_"+o+"_rn,#jqgh_"+o+"_subgrid),:hidden)",placeholder:{element:function(t){var e=$(document.createElement(t[0].nodeName)).addClass(t[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return e},update:function(t,e){e.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),e.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}},update:function(t,e){var o=$(e.item).parent(),s=$(">th",o),r=i.p.colModel,n={},a=i.p.id+"_";$.each(r,function(t){n[this.name]=t});var d=[];s.each(function(){var t=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(a,"");n.hasOwnProperty(t)&&d.push(n[t])}),$(i).jqGrid("remapColumns",d,!0,!0),$.isFunction(i.p.sortable.update)&&i.p.sortable.update(d),setTimeout(function(){i.p.disableClick=!1},50)}};if(i.p.sortable.options?$.extend(s,i.p.sortable.options):$.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),s.start){var r=s.start;s.start=function(t,i){e(),r.call(this,t,i)}}else s.start=e;i.p.sortable.exclude&&(s.items+=":not("+i.p.sortable.exclude+")"),t.sortable(s).data("sortable").floating=!0})},columnChooser:function(t){function e(t,e,i){if(e>=0){var o=t.slice(),s=o.splice(e,Math.max(t.length-e,e));return e>t.length&&(e=t.length),o[e]=i,o.concat(s)}}function i(t,e){t&&("string"==typeof t?$.fn[t]&&$.fn[t].apply(e,$.makeArray(arguments).slice(2)):$.isFunction(t)&&t.apply(e,$.makeArray(arguments).slice(2)))}var o=this;if(!$("#colchooser_"+$.jgrid.jqID(o[0].p.id)).length){var s=$('<div id="colchooser_'+o[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),r=$("select",s);if(t=$.extend({width:420,height:240,classname:null,done:function(t){t&&o.jqGrid("remapColumns",t,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(t){var e={};return e[t.bSubmit]=function(){t.apply_perm(),t.cleanup(!1)},e[t.bCancel]=function(){t.cleanup(!0)},$.extend(!0,{buttons:e,close:function(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+20},t.dialog_opts||{})},apply_perm:function(){$("option",r).each(function(){this.selected?o.jqGrid("showCol",n[this.value].name):o.jqGrid("hideCol",n[this.value].name)});var i=[];$("option:selected",r).each(function(){i.push(parseInt(this.value,10))}),$.each(i,function(){delete d[n[parseInt(this,10)].name]}),$.each(d,function(){var t=parseInt(this,10);i=e(i,t,t)}),t.done&&t.done.call(o,i)},cleanup:function(e){i(t.dlog,s,"destroy"),i(t.msel,r,"destroy"),s.remove(),e&&t.done&&t.done.call(o)},msel_opts:{}},$.jgrid.col,t||{}),$.ui&&$.ui.multiselect&&"multiselect"===t.msel){if(!$.jgrid._multiselect)return alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!"),void 0;t.msel_opts=$.extend($.ui.multiselect.defaults,t.msel_opts)}t.caption&&s.attr("title",t.caption),t.classname&&(s.addClass(t.classname),r.addClass(t.classname)),t.width&&($(">div",s).css({width:t.width,margin:"0 auto"}),r.css("width",t.width)),t.height&&($(">div",s).css("height",t.height),r.css("height",t.height-10));var n=o.jqGrid("getGridParam","colModel"),a=o.jqGrid("getGridParam","colNames"),d={},l=[];r.empty(),$.each(n,function(t){return d[this.name]=t,this.hidedlg?(this.hidden||l.push(t),void 0):(r.append("<option value='"+t+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(a[t])+"</option>"),void 0)});var p=$.isFunction(t.dlog_opts)?t.dlog_opts.call(o,t):t.dlog_opts;i(t.dlog,s,p);var c=$.isFunction(t.msel_opts)?t.msel_opts.call(o,t):t.msel_opts;i(t.msel,r,c)}},sortableRows:function(t){return this.each(function(){var e=this;e.grid&&(e.p.treeGrid||$.fn.sortable&&(t=$.extend({cursor:"move",axis:"y",items:".jqgrow"},t||{}),t.start&&$.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&$.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(i,o){if($(o.item).css("border-width","0px"),$("td",o.item).each(function(t){this.style.width=e.grid.cols[t].style.width}),e.p.subGrid){var s=$(o.item).attr("id");try{$(e).jqGrid("collapseSubGridRow",s)}catch(r){}}t._start_&&t._start_.apply(this,[i,o])},t.update=function(i,o){$(o.item).css("border-width",""),e.p.rownumbers===!0&&$("td.jqgrid-rownum",e.rows).each(function(t){$(this).html(t+1+(parseInt(e.p.page,10)-1)*parseInt(e.p.rowNum,10))}),t._update_&&t._update_.apply(this,[i,o])},$("tbody:first",e).sortable(t),$("tbody:first",e).disableSelection()))})},gridDnD:function(t){return this.each(function(){function e(){var t=$.data(s,"dnd");$("tr.jqgrow:not(.ui-draggable)",s).draggable($.isFunction(t.drag)?t.drag.call($(s),t):t.drag)}var i,o,s=this;if(s.grid&&!s.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var r="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(r),"string"==typeof t&&"updateDnD"===t&&s.p.jqgdnd===!0)return e(),void 0;if(t=$.extend({drag:function(t){return $.extend({start:function(e,i){var o,r;if(s.p.subGrid){r=$(i.helper).attr("id");try{$(s).jqGrid("collapseSubGridRow",r)}catch(n){}}for(o=0;o<$.data(s,"dnd").connectWith.length;o++)0===$($.data(s,"dnd").connectWith[o]).jqGrid("getGridParam","reccount")&&$($.data(s,"dnd").connectWith[o]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),$("td",i.helper).each(function(t){this.style.width=s.grid.headers[t].width+"px"}),t.onstart&&$.isFunction(t.onstart)&&t.onstart.call($(s),e,i)},stop:function(e,i){var o,r;for(i.helper.dropped&&!t.dragcopy&&(r=$(i.helper).attr("id"),void 0===r&&(r=$(this).attr("id")),$(s).jqGrid("delRowData",r)),o=0;o<$.data(s,"dnd").connectWith.length;o++)$($.data(s,"dnd").connectWith[o]).jqGrid("delRowData","jqg_empty_row");t.onstop&&$.isFunction(t.onstop)&&t.onstop.call($(s),e,i)}},t.drag_opts||{})},drop:function(t){return $.extend({accept:function(t){if(!$(t).hasClass("jqgrow"))return t;var e=$(t).closest("table.ui-jqgrid-btable");if(e.length>0&&void 0!==$.data(e[0],"dnd")){var i=$.data(e[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(this.id),i)?!0:!1}return!1},drop:function(e,i){if($(i.draggable).hasClass("jqgrow")){var o=$(i.draggable).attr("id"),r=i.draggable.parent().parent().jqGrid("getRowData",o);if(!t.dropbyname){var n,a,d=0,l={},p=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(a in r)r.hasOwnProperty(a)&&(n=p[d].name,"cb"!==n&&"rn"!==n&&"subgrid"!==n&&r.hasOwnProperty(a)&&p[d]&&(l[n]=r[a]),d++);r=l}catch(c){}}if(i.helper.dropped=!0,t.beforedrop&&$.isFunction(t.beforedrop)){var u=t.beforedrop.call(this,e,i,r,$("#"+$.jgrid.jqID(s.p.id)),$(this));void 0!==u&&null!==u&&"object"==typeof u&&(r=u)}if(i.helper.dropped){var h;t.autoid&&($.isFunction(t.autoid)?h=t.autoid.call(this,r):(h=Math.ceil(1e3*Math.random()),h=t.autoidprefix+h)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",h,r,t.droppos)}t.ondrop&&$.isFunction(t.ondrop)&&t.ondrop.call(this,e,i,r)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{}),t.connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=$.map(t.connectWith,function(t){return $.trim(t)}),$.data(s,"dnd",t),0===s.p.reccount||s.p.jqgdnd||e(),s.p.jqgdnd=!0,i=0;i<t.connectWith.length;i++)o=t.connectWith[i],$(o).droppable($.isFunction(t.drop)?t.drop.call($(s),t):t.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(t,e){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",e.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,t,e)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery);