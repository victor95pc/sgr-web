!function(t){t.jqplot.LogAxisRenderer=function(){t.jqplot.LinearAxisRenderer.call(this),this.axisDefaults={base:10,tickDistribution:"power"}},t.jqplot.LogAxisRenderer.prototype=new t.jqplot.LinearAxisRenderer,t.jqplot.LogAxisRenderer.prototype.constructor=t.jqplot.LogAxisRenderer,t.jqplot.LogAxisRenderer.prototype.init=function(e){this.drawBaseline=!0,this.minorTicks="auto",this._scalefact=1,t.extend(!0,this,e),this._autoFormatString="%d",this._overrideFormatString=!1;for(var i in this.renderer.axisDefaults)null==this[i]&&(this[i]=this.renderer.axisDefaults[i]);this.resetDataBounds()},t.jqplot.LogAxisRenderer.prototype.createTicks=function(){var e,i,s,a,r,h=(this._ticks,this.ticks),n=(this.name,this._dataBounds),o="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,l=30;if(this._scalefact=(Math.max(o,l+1)-l)/300,h.length){for(r=0;r<h.length;r++){var c=h[r],u=new this.tickRenderer(this.tickOptions);c.constructor==Array?(u.value=c[0],u.label=c[1],this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),u.setTick(c[0],this.name),this._ticks.push(u)):t.isPlainObject(c)?(t.extend(!0,u,c),u.axis=this.name,this._ticks.push(u)):(u.value=c,this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),u.setTick(c,this.name),this._ticks.push(u))}this.numberTicks=h.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value}else if(null==this.min&&null==this.max){if(i=n.min*(2-this.padMin),s=n.max*this.padMax,i==s){var m=.05;i*=1-m,s*=1+m}if(null!=this.min&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(null!=this.max&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");var g,k;g=Math.pow(this.base,Math.floor(Math.log(i)/Math.log(this.base))),k=Math.pow(this.base,Math.ceil(Math.log(s)/Math.log(this.base))),0===g&&(g=1);var _=Math.round(Math.log(g)/Math.LN10);null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=g,this.max=k;var x,d=(this.max-this.min,"auto"===this.minorTicks?0:this.minorTicks);if(null==this.numberTicks)if(o>140){if(x=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),2>x&&(x=2),0===d){var p=o/(x-1);d=100>p?0:190>p?1:250>p?3:600>p?4:9}}else x=2,0===d&&(d=1),d=0;else x=this.numberTicks;if(_>=0&&3!==d)this._autoFormatString="%d";else if(0>=_&&3===d){var p=-(_-1);this._autoFormatString="%."+Math.abs(_-1)+"f"}else if(0>_){var p=-_;this._autoFormatString="%."+Math.abs(_)+"f"}else this._autoFormatString="%d";for(var u,f,w,M,e,r=0;x>r;r++)if(a=Math.pow(this.base,r-x+1)*this.max,u=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(u.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),u.setTick(a,this.name),this._ticks.push(u),d&&x-1>r){w=Math.pow(this.base,r-x+2)*this.max,M=w-a,e=w/(d+1);for(var b=d-1;b>=0;b--)f=w-e*(b+1),u=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&""!=this._autoFormatString&&(u.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),u.setTick(f,this.name),this._ticks.push(u)}}else if(null!=this.min&&null!=this.max){var v,R,T=t.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(null==this.numberTicks&&null==this.tickInterval){var S=Math.max(o,l+1),L=Math.ceil((S-l)/35+1),F=t.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,L);this._autoFormatString=F[3],v=F[2],R=F[4];for(var r=0;v>r;r++)T.value=this.min+r*R,u=new this.tickRenderer(T),this._overrideFormatString&&""!=this._autoFormatString&&(u.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),this._ticks.push(u)}else if(null!=this.numberTicks&&null!=this.tickInterval){v=this.numberTicks;for(var r=0;v>r;r++)T.value=this.min+r*this.tickInterval,u=new this.tickRenderer(T),this._overrideFormatString&&""!=this._autoFormatString&&(u.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(u.showMark=!1):(u.showLabel=!1,u.showMark=!1),this._ticks.push(u)}}},t.jqplot.LogAxisRenderer.prototype.pack=function(e,i){var s=parseInt(this.base,10),a=this._ticks,r=function(t){return Math.log(t)/Math.log(s)},h=function(t){return Math.pow(Math.E,Math.log(s)*t)},n=r(this.max),o=r(this.min),l=i.max,c=i.min,u=null==this._label?!1:this._label.show;for(var m in e)this._elem.css(m,e[m]);this._offsets=i;var g=l-c,k=n-o;if(this.p2u=function(t){return h((t-c)*k/g+o)},this.u2p=function(t){return(r(t)-o)*g/k+c},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(r(t)-o)*g/k},this.series_p2u=function(t){return h(t*k/g+o)}):(this.series_u2p=function(t){return(r(t)-n)*g/k},this.series_p2u=function(t){return h(t*k/g+n)}),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var _=0;_<a.length;_++){var x=a[_];if(x.show&&x.showLabel){var d;if(x.constructor==t.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":d=x.angle<0?-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2:-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;case"end":d=-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2;break;case"start":d=-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;case"middle":d=-x.getWidth()/2+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2;break;default:d=-x.getWidth()/2+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2}else d=-x.getWidth()/2;var p=this.u2p(x.value)+d+"px";x._elem.css("left",p),x.pack()}}if(u){var f=this._label._elem.outerWidth(!0);this._label._elem.css("left",c+g/2-f/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var _=0;_<a.length;_++){var x=a[_];if(x.show&&x.showLabel){var d;if(x.constructor==t.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":case"end":d=x.angle<0?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;case"start":d=x.angle>0?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;case"middle":d=-x.getHeight()/2;break;default:d=-x.getHeight()/2}else d=-x.getHeight()/2;var p=this.u2p(x.value)+d+"px";x._elem.css("top",p),x.pack()}}if(u){var w=this._label._elem.outerHeight(!0);this._label._elem.css("top",l-g/2-w/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack()}}}}(jQuery);